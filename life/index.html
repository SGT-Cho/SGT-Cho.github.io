<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Life | Minjae's Life & Review Blog</title>
  
  <!-- Meta tags for SEO and social sharing -->
  <meta name="description" content="Personal stories, student experiences, and daily journals from my life as an AI Engineer student">
  <meta name="keywords" content="life, student, AI Engineer, journal, blog">
  <meta name="author" content="Minjae Cho">
  
  <!-- Open Graph meta tags for social sharing -->
  <meta property="og:title" content="Life | Minjae's Life & Review Blog">
  <meta property="og:description" content="Personal stories, student experiences, and daily journals from my life as an AI Engineer student">
  <meta property="og:image" content="/assets/images/banner.jpg">
  <meta property="og:url" content="https://sgt-cho.github.io/life/">
  <meta property="og:type" content="website">
  
  <!-- Twitter card meta tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Life | Minjae's Life & Review Blog">
  <meta name="twitter:description" content="Personal stories, student experiences, and daily journals from my life as an AI Engineer student">
  <meta name="twitter:image" content="/assets/images/banner.jpg">
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
  
  <!-- Stylesheets -->
  <link rel="stylesheet" href="/css/style.css">
  
  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="/assets/images/minjae.png">
  
  <!-- Web App Manifest -->
  <link rel="manifest" href="/manifest.json">
</head>
<body>
<header>
  <!-- Header/Navigation -->
  <nav>
    <a href="/" class="nav-logo">
      <img src="/assets/images/minjae.png" alt="Minjae Cho">
      <span>Minjae Cho</span>
    </a>
    
    <div class="nav-links">
      <a href="/life/" class="active">Life</a>
      <a href="/review/">Review</a>
      <a href="/portfolio/">Portfolio</a>
      <a href="/archive/">Archive</a>
      <a href="/about/">About</a>
    </div>
    
    <div class="hamburger" aria-label="메뉴 열기" tabindex="0">
      <span></span><span></span><span></span>
    </div>
  </nav>
</header>

<main>
  <section class="intro">
    <h1>Life</h1>
    <p class="tagline">Personal stories, student experiences, and daily journals from my life as an AI Engineer student</p>
  </section>
  
  <!-- 포스트 컨테이너 -->
  <section class="card-grid" id="posts-container">
    <!-- 포스트는 JavaScript로 동적 로드 -->
    <div id="loading-initial" class="text-center" style="grid-column: 1/-1;">
      <p>게시물을 불러오는 중...</p>
    </div>
  </section>
  
  <!-- 더보기 버튼 -->
  <div class="text-center" style="margin: 2rem 0;">
    <button id="load-more-btn" class="btn">더 많은 일상 포스트 보기</button>
    <p id="loading-indicator" style="display: none;">포스트 로딩 중...</p>
  </div>
  
  <!-- Tag Cloud for this category -->
  <section>
    <h2>Life Tags</h2>
    <div class="tag-cloud">
      <a href="/tags/study/">study <span>(1)</span></a>
      <a href="/tags/graduation/">graduation <span>(1)</span></a>
      <a href="/tags/daily/">daily <span>(1)</span></a>
      <a href="/tags/event/">event <span>(1)</span></a>
    </div>
  </section>
</main>
  
<!-- Search Modal -->
<div class="search-modal">
  <div class="search-container">
    <div class="search-form">
      <input type="text" class="search-input" placeholder="Search posts, topics, or tags...">
      <button class="search-close">&times;</button>
    </div>
    <div class="search-results">
      <!-- Results will be populated here -->
    </div>
  </div>
</div>
  
<!-- Footer -->
<footer>
  <div class="container">
    <p>&copy; 2025 Minjae Cho · Built with passion and code</p>
  </div>
</footer>
  
<!-- Scripts -->
<script src="/js/main.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // 실제 게시물 데이터를 posts.json에서 로드
    fetch('/posts.json')
      .then(response => response.json())
      .then(posts => {
        // Life 게시물만 필터링
        const lifePosts = posts.filter(post => post.url.includes('/life/') && !post.url.includes('index.html'));
        // 최신 순으로 정렬
        lifePosts.sort((a, b) => new Date(b.date) - new Date(a.date));
        setupDynamicPagination(lifePosts);
      })
      .catch(error => {
        console.error('Error loading posts:', error);
        document.getElementById('posts-container').innerHTML = 
          '<p class="text-center" style="grid-column: 1/-1;">게시물을 불러오는 중 오류가 발생했습니다.</p>';
      });
      
    // 화면 크기 기반 동적 페이지네이션 설정
    function setupDynamicPagination(allPosts) {
      const postsContainer = document.getElementById('posts-container');
      const loadMoreBtn = document.getElementById('load-more-btn');
      const loadingIndicator = document.getElementById('loading-indicator');
      const loadingInitial = document.getElementById('loading-initial');
      
      // 초기 로딩 표시 제거
      loadingInitial.style.display = 'none';
      
      // 변수 선언
      let currentIndex = 0;
      
      // 화면에 표시될 게시물 수를 계산하는 함수
      function calculateVisiblePostCount() {
        // 그리드 컨테이너의 너비
        const containerWidth = postsContainer.offsetWidth;
        // 카드 최소 너비 (CSS의 min-width 값 + 좌우 여백)
        const cardMinWidth = 280 + 20; // 300px 기준
        // 한 행에 들어갈 수 있는 최대 카드 수
        const cardsPerRow = Math.floor(containerWidth / cardMinWidth);
        // 현재 화면에 표시할 행 수
        const rows = 2; // 기본 2행 표시
        
        // 전체 표시할 카드 수
        return Math.max(2, cardsPerRow * rows); // 최소 2개 이상
      }
      
      // 초기 포스트 로드
      loadPosts();
      
      // 더보기 버튼 클릭 이벤트
      loadMoreBtn.addEventListener('click', function() {
        loadPosts();
      });
      
      // 화면 크기 변경 감지 이벤트
      window.addEventListener('resize', function() {
        // 화면 크기 변경 시에는 버튼 상태만 업데이트
        updateButtonState();
      });
      
      // 버튼 상태 업데이트 함수
      function updateButtonState() {
        if (currentIndex >= allPosts.length) {
          loadMoreBtn.style.display = 'none';
        } else {
          loadMoreBtn.style.display = 'inline-block';
        }
      }
      
      // 포스트 로드 함수
      function loadPosts() {
        // 로딩 표시
        loadMoreBtn.style.display = 'none';
        loadingIndicator.style.display = 'block';
        
        // 로드할 포스트 수 계산
        const postsToLoadCount = calculateVisiblePostCount() * 2; // 화면에 표시되는 게시물의 2배
        
        // 실제로 표시할 게시물 배열 구하기
        const endIndex = Math.min(currentIndex + postsToLoadCount, allPosts.length);
        const postsToShow = allPosts.slice(currentIndex, endIndex);
        
        // 지연 효과 추가 (실제 네트워크 로딩 시뮬레이션)
        setTimeout(() => {
          // 포스트 HTML 생성
          let postsHTML = '';
          
          postsToShow.forEach(post => {
            // 게시물 날짜 형식화
            const postDate = new Date(post.date);
            const formattedDate = postDate.toLocaleDateString('en-US', { 
              year: 'numeric', 
              month: 'long', 
              day: 'numeric' 
            });
            
            postsHTML += `
              <div class="project-card">
                <img src="/assets/images/thumbnails/daily.png" alt="${post.title}" loading="lazy">
                <h3>${post.title}</h3>
                <p class="project-tags"><span>${formattedDate}</span> <span>${post.readtime || '5'} min read</span></p>
                <p>${post.teaser || '게시물 내용 미리보기...'}</p>
                <a href="${post.url}" class="post-card-link">Read more →</a>
              </div>
            `;
          });
          
          // HTML 추가
          if (currentIndex === 0) {
            postsContainer.innerHTML = postsHTML;
          } else {
            postsContainer.innerHTML += postsHTML;
          }
          
          // 현재 인덱스 업데이트
          currentIndex = endIndex;
          
          // 로딩 표시 제거
          loadingIndicator.style.display = 'none';
          
          // 더보기 버튼 상태 업데이트
          updateButtonState();
          
          // 다음 포스트 표시를 위해 버튼으로 스크롤 (첫 로드가 아닐 경우)
          if (currentIndex > postsToLoadCount) {
            loadMoreBtn.scrollIntoView({ behavior: 'smooth', block: 'end' });
          }
        }, 300);
      }
    }
  });
</script>
</body>
</html>